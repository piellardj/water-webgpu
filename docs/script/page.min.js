var Page;!function(e){var e=e.Demopage||(e.Demopage={}),r="error-messages",t=document.getElementById(r);if(!t)throw new Error("Cannot find element '"+r+"'.");function a(e){return t?t.querySelector("span[id=error-message-"+e+"]"):null}e.setErrorMessage=function(e,r){var n;t&&((n=a(e))?n.innerHTML=r:((n=document.createElement("span")).id="error-message-"+e,n.innerText=r,t.appendChild(n),t.appendChild(document.createElement("br"))))},e.removeErrorMessage=function(e){var r;t&&(e=a(e))&&((r=e.nextElementSibling)&&t.removeChild(r),t.removeChild(e))}}(Page=Page||{});
var Page;!function(n){var e,t,i,a;function s(e){this.queryParameters={};var t=e.indexOf(s.queryDelimiter);if(t<0)this.baseUrl=e;else{this.baseUrl=e.substring(0,t);for(var r=0,n=e.substring(t+s.queryDelimiter.length).split(s.parameterDelimiter);r<n.length;r++){var i,a=n[r],o=a.split(s.keyValueDelimiter);2===o.length?(i=decodeURIComponent(o[0]),o=decodeURIComponent(o[1]),this.queryParameters[i]=o):console.log("Unable to parse query string parameter '"+a+"'.")}}}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.join(":")+":"}function l(e){window.history.replaceState("","",e)}function r(e,t){this.objectsName=e,this.loadObjectsFunction=t,this.cacheObject=null}function c(e,t,r){this.prefix=e,this.serialize=t,this.tryDeserialize=r}e=n.Helpers||(n.Helpers={}),(t=e.Utils||(e.Utils={})).selectorAll=function(e,t){for(var r=e.querySelectorAll(t),n=[],i=0;i<r.length;i++)n.push(r[i]);return n},t.selector=function(e,t){if(e=e.querySelector(t))return e;throw new Error("No element matching '".concat(t,"'."))},t.touchArray=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t},t.findFirst=function(e,t){if("function"==typeof Array.prototype.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1},t=e.URL||(e.URL={}),i="page",s.prototype.setQueryParameter=function(e,t){null===t?delete this.queryParameters[e]:this.queryParameters[e]=t},s.prototype.loopOnParameters=function(e,t){for(var r=0,n=Object.keys(this.queryParameters);r<n.length;r++){var i,a=n[r];0===a.indexOf(e)&&a.length>e.length&&(i=this.queryParameters[a],t(a.substring(e.length),i))}},s.prototype.buildUrl=function(){for(var e=[],t=0,r=Object.keys(this.queryParameters);t<r.length;t++){var n=r[t],i=this.queryParameters[n],n=encodeURIComponent(n),i=encodeURIComponent(i);e.push(n+s.keyValueDelimiter+i)}var a=e.join(s.parameterDelimiter);return a?this.baseUrl+s.queryDelimiter+a:this.baseUrl},s.queryDelimiter="?",s.parameterDelimiter="&",s.keyValueDelimiter="=",a=s,t.loopOnParameters=function(e,t){var r=new a(window.location.href),e=o(i,e);r.loopOnParameters(e,t)},t.setQueryParameter=function(e,t,r){var n=new a(window.location.href),e=o(i,e);n.setQueryParameter(e+t,r),l(n.buildUrl())},t.removeQueryParameter=function(e,t){var r=new a(window.location.href),e=o(i,e);r.setQueryParameter(e+t,null),l(r.buildUrl())},(e.Events||(e.Events={})).callAfterDOMLoaded=function(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()},r.prototype.getById=function(e){var t=this.safeCacheObject[e];if(t)return t;throw new Error("Invalid '".concat(this.objectsName,"' cache object id '").concat(e,"'."))},r.prototype.getByIdSafe=function(e){return this.safeCacheObject[e]||null},r.prototype.load=function(){this.cacheObject||(this.cacheObject=this.loadCacheObject())},Object.defineProperty(r.prototype,"safeCacheObject",{get:function(){return this.cacheObject||this.load(),this.cacheObject},enumerable:!1,configurable:!0}),r.prototype.loadCacheObject=function(){for(var e={},t=0,r=this.loadObjectsFunction();t<r.length;t++){var n=r[t];if(void 0!==e[n.id])throw new Error("Object '".concat(n.id,"' is already in cache."));e[n.id]=n}return e},e.Cache=r,c.prototype.storeState=function(e){var t=this.serialize(e);n.Helpers.URL.setQueryParameter(this.prefix,e.id,t)},c.prototype.clearStoredState=function(e){n.Helpers.URL.removeQueryParameter(this.prefix,e.id)},c.prototype.applyStoredState=function(){var r=this;n.Helpers.URL.loopOnParameters(this.prefix,function(e,t){r.tryDeserialize(e,t)||(console.log("Removing invalid query parameter '"+e+"="+t+"'."),n.Helpers.URL.removeQueryParameter(r.prefix,e))})},e.Storage=c}(Page=Page||{});
var Page;!function(e){(e.Controls||(e.Controls={})).setVisibility=function(e,n){var t;e="div#control-"+e,(t=document.querySelector(e))||console.error("Cannot find control '"+e+"'."),t&&(t.style.display=n?"":"none")}}(Page=Page||{}),function(d){(d.Sections||(d.Sections={})).setVisibility=function(e,n){if(e="section#section-"+e,(t=document.querySelector(e))||console.error("Cannot find section '"+e+"'."),(e=t)&&e.parentElement){e.style.display=n?"":"none";var t=e.parentElement;function o(e){return"hr"===e.tagName.toLowerCase()}function r(e){return"none"!==e.style.display}for(var i=d.Helpers.Utils.selectorAll(t,"section, hr"),l=!1,s=0,a=i;s<a.length;s++)o(y=a[s])?(y.style.display=l?"none":"",l=!0):r(y)&&(l=!1);for(var c=0,f=i;c<f.length;c++)if(o(y=f[c]))y.style.display="none";else if(r(y))break;for(var y,u=i.length-1;0<=u;u--)if(o(y=i[u]))y.style.display="none";else if(r(y))break}}}(Page=Page||{});
var Page;!function(e){var t,r,c,n;function o(e){var t=this;this.observers=[],this.id=e.id,this.element=e,this.reloadValue(),this.element.addEventListener("change",function(){t.reloadValue(),n.storeState(t),t.callObservers()})}t=e.Checkbox||(e.Checkbox={}),Object.defineProperty(o.prototype,"checked",{get:function(){return this._checked},set:function(e){this.element.checked=e,this.reloadValue()},enumerable:!1,configurable:!0}),o.prototype.callObservers=function(){for(var e=0,t=this.observers;e<t.length;e++)(0,t[e])(this.checked)},o.prototype.reloadValue=function(){this._checked=this.element.checked},r=o,c=new e.Helpers.Cache("Checkbox",function(){return e.Helpers.Utils.selectorAll(document,"div.checkbox > input[type=checkbox][id]").map(function(e){return new r(e)})}),n=new e.Helpers.Storage("checkbox",function(e){return e.checked?"true":"false"},function(e,t){e=c.getByIdSafe(e);return!(!e||"true"!==t&&"false"!==t||(e.checked="true"===t,e.callObservers(),0))}),e.Helpers.Events.callAfterDOMLoaded(function(){c.load(),n.applyStoredState()}),t.addObserver=function(e,t){c.getById(e).observers.push(t)},t.setChecked=function(e,t){c.getById(e).checked=t},t.isChecked=function(e){return c.getById(e).checked},t.storeState=function(e){e=c.getById(e),n.storeState(e)},t.clearStoredState=function(e){e=c.getById(e),n.clearStoredState(e)}}(Page=Page||{});
var Page;!function(r){var e,t,n,s,i;function l(e){var t=this,e=(this.onInputObservers=[],this.onChangeObservers=[],this.inputElement=r.Helpers.Utils.selector(e,"input[type='range']"),this.progressLeftElement=r.Helpers.Utils.selector(e,".range-progress-left"),this.tooltipElement=r.Helpers.Utils.selector(e,"output.range-tooltip"),this.id=this.inputElement.id,+this.inputElement.min),n=+this.inputElement.max,i=+this.inputElement.step;this.nbDecimalsToDisplay=l.getMaxNbDecimals(e,n,i),this.inputElement.addEventListener("input",function(e){e.stopPropagation(),t.reloadValue(),t.callSpecificObservers(t.onInputObservers)}),this.inputElement.addEventListener("change",function(e){e.stopPropagation(),t.reloadValue(),s.storeState(t),t.callSpecificObservers(t.onChangeObservers)}),this.reloadValue()}e=r.Range||(r.Range={}),Object.defineProperty(l.prototype,"value",{get:function(){return this._value},set:function(e){this.inputElement.value=""+e,this.reloadValue()},enumerable:!1,configurable:!0}),l.prototype.callObservers=function(){this.callSpecificObservers(this.onInputObservers),this.callSpecificObservers(this.onChangeObservers)},l.prototype.callSpecificObservers=function(e){for(var t=0,n=e;t<n.length;t++)(0,n[t])(this.value)},l.prototype.updateAppearance=function(){var e=(+this.inputElement.value-+this.inputElement.min)/(+this.inputElement.max-+this.inputElement.min),e=Math.max(0,Math.min(1,e));this.progressLeftElement.style.width=100*e+"%",e=this.nbDecimalsToDisplay<0?this.inputElement.value:(+this.inputElement.value).toFixed(this.nbDecimalsToDisplay),this.tooltipElement.textContent=e},l.prototype.reloadValue=function(){this._value=+this.inputElement.value,this.updateAppearance()},l.getMaxNbDecimals=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=-1,i=0,r=e;i<r.length;i++){var s=r[i],a=l.nbDecimals(s);if(s<0)return-1;n<a&&(n=a)}return n},l.nbDecimals=function(e){e=e.toString();return/^[0-9]+$/.test(e)?0:/^[0-9]+\.[0-9]+$/.test(e)?e.length-(e.indexOf(".")+1):-1},t=l,n=new r.Helpers.Cache("Range",function(){return r.Helpers.Utils.selectorAll(document,".range-container > input[type='range']").map(function(e){e=e.parentElement;return new t(e)})}),s=new r.Helpers.Storage("range",function(e){return""+e.value},function(e,t){e=n.getByIdSafe(e);return!!e&&(e.value=+t,e.callObservers(),!0)}),r.Helpers.Events.callAfterDOMLoaded(function(){n.load(),s.applyStoredState()}),i=!!window.MSInputMethodContext&&!!document.documentMode,e.addObserver=function(e,t){e=n.getById(e),(i?e.onChangeObservers:e.onInputObservers).push(t)},e.addLazyObserver=function(e,t){n.getById(e).onChangeObservers.push(t)},e.getValue=function(e){return n.getById(e).value},e.setValue=function(e,t){n.getById(e).value=t},e.storeState=function(e){e=n.getById(e),s.storeState(e)},e.clearStoredState=function(e){e=n.getById(e),s.clearStoredState(e)}}(Page=Page||{});
var Page;!function(d){var a,e,t=d.ColorPicker||(d.ColorPicker={});function u(e,t,n){return Math.max(t,Math.min(n,e))}function l(e,t,n){return u(Math.round(e),t,n)}function s(e,t){return(e%t+t)%t}function n(e){e=e.toString(16).toUpperCase();return 2===e.length?e:"0"+e}(e=a=a||{}).parseHexa=function(e){return/^#[0-9a-fA-F]{6}$/.test(e)?e.toUpperCase():null},e.hsvToRgb=function(e){var t=e.h/60,n=e.s*e.v,r=n*(1-Math.abs(s(t,2)-1)),t=t<=1?{r:n,g:r,b:0}:t<=2?{r:r,g:n,b:0}:t<=3?{r:0,g:n,b:r}:t<=4?{r:0,g:r,b:n}:t<=5?{r:r,g:0,b:n}:{r:n,g:0,b:r},r=e.v-n;return t.r=l(255*(t.r+r),0,255),t.g=l(255*(t.g+r),0,255),t.b=l(255*(t.b+r),0,255),t},e.rgbToHsv=function(e){var t=e.r/255,n=e.g/255,e=e.b/255,r=Math.max(t,n,e),i=r-Math.min(t,n,e),o={h:0,s:0,v:r};return 0!=i&&(r===t?o.h=(n-e)/i%6*60:r===n?o.h=60*((e-t)/i+2):r===e&&(o.h=60*((t-n)/i+4))),0!==r&&(o.s=i/r),o.h=s(o.h,360),o},e.rgbToHex=function(e){return"#"+n(e.r)+n(e.g)+n(e.b)},e.hexToRgb=function(e){return{r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16)}},Object.defineProperty(i.prototype,"value",{get:function(){var e=this.element.dataset.currentColor;if(e)return e;throw new Error("No current color on ColorPicker '".concat(this.id,"'."))},set:function(e){if(this.value!==e){this.element.dataset.currentColor=e,this.updateVisiblePart();for(var t=a.hexToRgb(e),n=0,r=this.observers;n<r.length;n++)(0,r[n])(t)}},enumerable:!1,configurable:!0}),i.prototype.attachPopup=function(e){var t=this.element.parentElement;if(!t)throw new Error("ColorPicker '".concat(this.id,"' is not attached."));t.appendChild(e)},i.prototype.updateVisiblePart=function(){var e=this.value;this.colorPreview.style.background=e,this.colorPreviewText.textContent=e};var r=i;function i(e){var t=this;this.observers=[],this.element=e,this.id=e.id,this.colorPreview=e.querySelector(".color-preview"),this.colorPreviewText=e.querySelector(".color-value"),this.updateVisiblePart(),this.element.addEventListener("click",function(){h.assignPopup(t)})}var o=new d.Helpers.Cache("ColorPicker",function(){return d.Helpers.Utils.selectorAll(document,".color-picker[id]").map(function(e){return new r(e)})}),p=new d.Helpers.Storage("color-picker",function(e){return e.value},function(e,t){e=o.getByIdSafe(e),t=a.parseHexa(t);return!(!e||!t||(e.value=t,0))}),h=(c.assignPopup=function(e){c.popup||(c.popup=new c),c.popup.attach(e)},c.prototype.updateAppearance=function(){var e=a.hsvToRgb(this.hsv),t=a.rgbToHex(e),n="rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"),r="hsl(".concat(Math.round(this.hsv.h),", 100%, 50%)"),r=(this.hueColorFilter.style.background="linear-gradient(to right, white, ".concat(r,")"),this.hueCursor.style.background=r,this.valueSaturationCursor.style.background=n,this.previewColor.style.background=n,this.previewHexaValue.value=t.substring(1),this.previewRgbValue.textContent="".concat(e.r,", ").concat(e.g,", ").concat(e.b),c.percentageString(this.hsv.s)),n=c.percentageString(this.hsv.v);this.previewHslValue.textContent="".concat(Math.round(this.hsv.h),"°, ").concat(r,", ").concat(n),this.hueCursor.style.left=c.percentageString(this.hsv.h/360),this.valueSaturationCursor.style.left=r,this.valueSaturationCursor.style.top=c.percentageString(1-this.hsv.v)},c.prototype.onInput=function(){var e=a.hsvToRgb(this.hsv),e=a.rgbToHex(e);this.updateAppearance(),this.currentControl&&(this.currentControl.value=e),p.storeState(this.currentControl)},c.prototype.attach=function(e){e=(this.currentControl=e).value,e=a.hexToRgb(e),e=a.rgbToHsv(e);c.popup.hsv.h=e.h,c.popup.hsv.v=e.v,c.popup.hsv.s=e.s,c.popup.updateAppearance(),this.popupElement.style.top="",this.popupElement.style.left="",this.currentControl.attachPopup(this.popupElement),this.fitPopupToContainer()},c.prototype.fitPopupToContainer=function(){var e,t,n,r,i,o;this.popupElement.parentElement&&(r=(i=(document.querySelector(".controls-block")||document.body).getBoundingClientRect()).left+i.width-16,o=i.top+i.height-16,this.popupElement.style.maxWidth=i.width-32+"px",this.popupElement.style.maxHeight=i.height-32+"px",e=this.popupElement.parentElement.getBoundingClientRect(),t=this.popupElement.getBoundingClientRect(),n=Math.max(0,i.left+16-e.left),r=Math.min(0,r-(e.left+t.width)),i=Math.max(0,i.top+16-e.top),o=Math.min(0,o-(e.top+t.height)),this.popupElement.style.left=n+r+"px",this.popupElement.style.top=i+o+"px")},c.prototype.registerCursorEvent=function(r,s){function p(e,t){var n=r.getBoundingClientRect(),e=(e-n.left)/n.width,t=(t-n.top)/n.height;return{x:Math.max(0,Math.min(1,e)),y:Math.max(0,Math.min(1,t))}}var n=r.querySelector(".cursor"),i={x:0,y:0},h=!1,c=(r.addEventListener("mousedown",function(e){var t;h=!0,i.x=0,i.y=0,n&&e.target===n?(t=n.getBoundingClientRect(),i.x=.5*t.width-(e.clientX-t.left),i.y=.5*t.height-(e.clientY-t.top)):(t=p(e.clientX,e.clientY),s(t))}),window.addEventListener("mouseup",function(){h=!1}),window.addEventListener("mousemove",function(e){h&&(e=p(e.clientX+i.x,e.clientY+i.y),s(e))}),[]);r.addEventListener("touchstart",function(e){h=!0;for(var t=0===c.length,e=d.Helpers.Utils.touchArray(e.changedTouches),n=0,r=e;n<r.length;n++){for(var i=r[n],o=!1,a=0,u=c;a<u.length;a++){var l=u[a];if(i.identifier===l){o=!0;break}}o||c.push(i.identifier)}t&&0<c.length&&((t=e[0])?(e=p(t.clientX,t.clientY),s(e)):console.error("Should not happen: ColorPicker missed first touch."))},!1),window.addEventListener("touchend",function(e){for(var t=0<c.length,n=0,r=d.Helpers.Utils.touchArray(e.changedTouches);n<r.length;n++)for(var i=r[n],o=0;o<c.length;++o)i.identifier===c[o]&&(c.splice(o,1),o--);t&&0===c.length&&(h=!1)}),window.addEventListener("touchmove",function(e){if(0<c.length&&h)for(var t=0,n=d.Helpers.Utils.touchArray(e.changedTouches);t<n.length;t++)for(var r=n[t],i=0,o=c;i<o.length;i++){var a=o[i];if(r.identifier===a)return a=p(r.clientX,r.clientY),s(a),void e.preventDefault()}},{passive:!1})},c.buildElement=function(e,t){e=document.createElement(e);return t&&(e.className=t.join(" ")),e},c.buildPreviewText=function(e,t){var n=document.createElement("tr"),r=document.createElement("td"),t=(r.textContent=t+":",document.createElement("td"));return n.appendChild(r),n.appendChild(t),e.appendChild(n),t},c.percentageString=function(e){return Math.round(100*e)+"%"},c);function c(){var t=this,e=(this.hsv={h:200,s:.75,v:.5},this.popupElement=c.buildElement("div",["popup","color-picker-popup"]),this.valueSaturationPicker=c.buildElement("div",["block","picker","value-saturation-picker"]),this.hueColorFilter=c.buildElement("span",["color-filter","outlined"]),this.valueSaturationPicker.appendChild(this.hueColorFilter),c.buildElement("span",["color-filter","outlined"])),e=(e.style.background="linear-gradient(to top, black, rgba(0,0,0,0))",this.valueSaturationPicker.appendChild(e),this.valueSaturationCursor=c.buildElement("span",["cursor"]),this.valueSaturationPicker.appendChild(this.valueSaturationCursor),this.popupElement.appendChild(this.valueSaturationPicker),this.huePicker=c.buildElement("div",["block","picker","hue-picker"]),c.buildElement("span",["hue-bar"])),e=(this.huePicker.appendChild(e),this.hueCursor=c.buildElement("span",["cursor"]),this.huePicker.appendChild(this.hueCursor),this.popupElement.appendChild(this.huePicker),c.buildElement("div",["preview-block"])),n=(this.previewColor=c.buildElement("div",["preview-color","outlined"]),this.previewColor.classList.add("block"),e.appendChild(this.previewColor),c.buildElement("table",["block"])),r=c.buildPreviewText(n,"hexa"),i=c.buildElement("span"),o=(i.textContent="#",r.appendChild(i),this.previewHexaValue=document.createElement("input"),this.previewHexaValue.type="text",this.previewHexaValue.minLength=6,this.previewHexaValue.maxLength=6,this.previewHexaValue.size=6,this.previewHexaValue.pattern="[0-9a-fA-F]{6}",this.previewHexaValue.addEventListener("input",function(){var e="#"+t.previewHexaValue.value;a.parseHexa(e)&&(e=a.hexToRgb(e),e=a.rgbToHsv(e),t.hsv.h=e.h,t.hsv.s=e.s,t.hsv.v=e.v,t.onInput())}),r.appendChild(this.previewHexaValue),this.previewRgbValue=c.buildPreviewText(n,"rgb"),this.previewHslValue=c.buildPreviewText(n,"hsv"),e.appendChild(n),this.popupElement.appendChild(e),this.registerCursorEvent(this.huePicker,function(e){t.hsv.h=l(360*e.x,0,360),t.onInput()}),this.registerCursorEvent(this.valueSaturationPicker,function(e){t.hsv.s=u(e.x,0,1),t.hsv.v=u(1-e.y,0,1),t.onInput(),t.valueSaturationCursor.style.left=c.percentageString(e.x),t.valueSaturationCursor.style.top=c.percentageString(e.y)}),!1);this.popupElement.addEventListener("mousedown",function(){o=!0}),window.addEventListener("mouseup",function(e){t.popupElement.contains(e.target)||!t.popupElement.parentElement||o||t.popupElement.parentElement.removeChild(t.popupElement),o=!1})}d.Helpers.Events.callAfterDOMLoaded(function(){o.load(),p.applyStoredState()}),t.addObserver=function(e,t){o.getById(e).observers.push(t)},t.getValue=function(e){return e=o.getById(e).value,a.hexToRgb(e)},t.getValueHex=function(e){return o.getById(e).value},t.setValue=function(e,t,n,r){t={r:l(t,0,255),g:l(n,0,255),b:l(r,0,255)},n=a.rgbToHex(t),o.getById(e).value=n},t.storeState=function(e){e=o.getById(e),p.storeState(e)},t.clearStoredState=function(e){e=o.getById(e),p.clearStoredState(e)}}(Page=Page||{});
var Page;!function(a){var e,t,n,l;function o(e){var t=this;this.observers=[],this.id=o.computeShortId(e.id),this.inputElements=[];for(var r=0,n=a.Helpers.Utils.selectorAll(e,"input");r<n.length;r++){var s=n[r];this.inputElements.push(s),s.addEventListener("change",function(e){e.stopPropagation(),t.reloadValues(),l.storeState(t),t.callObservers()},!1)}this.reloadValues()}e=a.Tabs||(a.Tabs={}),o.computeShortId=function(e){if(e.lastIndexOf(o.ID_SUFFIX)!=e.length-o.ID_SUFFIX.length)throw new Error("Invalid tabs container id: '"+e+"'.");return e.substring(0,e.length-o.ID_SUFFIX.length)},Object.defineProperty(o.prototype,"values",{get:function(){return this._values},set:function(e){for(var t=0,r=this.inputElements;t<r.length;t++){for(var n=r[t],s=!1,a=0,l=e;a<l.length;a++){var o=l[a];if(n.value===o){s=!0;break}}n.checked=s}this.reloadValues()},enumerable:!1,configurable:!0}),o.prototype.callObservers=function(){for(var e=0,t=this.observers;e<t.length;e++)(0,t[e])(this._values)},o.prototype.reloadValues=function(){for(var e=[],t=0,r=this.inputElements;t<r.length;t++){var n=r[t];n.checked&&e.push(n.value)}this._values=e},o.ID_SUFFIX="-id",t=o,n=new a.Helpers.Cache("Tabs",function(){return a.Helpers.Utils.selectorAll(document,"div.tabs[id]").map(function(e){return new t(e)})}),l=new a.Helpers.Storage("tabs",function(e){return e.values.join(";")},function(e,t){t=t.split(";"),e=n.getByIdSafe(e);return!!e&&(e.values=t,e.callObservers(),!0)}),a.Helpers.Events.callAfterDOMLoaded(function(){n.load(),l.applyStoredState()}),e.addObserver=function(e,t){n.getById(e).observers.push(t)},e.getValues=function(e){return n.getById(e).values},e.setValues=function(e,t,r){void 0===r&&(r=!1),(e=n.getById(e)).values=t,r&&l.storeState(e)},e.storeState=function(e){e=n.getById(e),l.storeState(e)},e.clearStoredState=function(e){e=n.getById(e),l.clearStoredState(e)}}(Page=Page||{});
var Page;!function(n){var e,t,l,i;function r(e){for(var a=this,t=(this.observers=[],this.id=e.id,this.containerElement=e,this.currentValueElement=n.Helpers.Utils.selector(e,".select-current-value"),this.valuesListElement=n.Helpers.Utils.selector(e,".select-values-list"),this.placeholder=this.valuesListElement.dataset.placeholder||"",this.currentValue=this.currentValueElement.dataset.value||null,this.valueElements=[],this.valuesListElement.querySelectorAll(".select-value[data-value]")),l=0;l<t.length;l++)this.valueElements.push(t[l]);this.containerElement.style.width="".concat(this.computeMinimumWidth(),"px"),document.addEventListener("click",function(e){var t=e.target;if(a.containerElement.classList.contains(r.EXPANDED_CLASS)){if(a.valuesListElement.contains(t))for(var l=0,n=a.valueElements;l<n.length;l++){var s=n[l];s.contains(t)&&(a.currentValue=s.dataset.value||null,a.currentValueElement.dataset.value=a.currentValue||void 0,a.currentValueElement.textContent=s.textContent,i.storeState(a),a.callObservers())}a.containerElement.classList.remove(r.EXPANDED_CLASS)}else a.currentValueElement.contains(t)&&a.containerElement.classList.add(r.EXPANDED_CLASS)})}e=n.Select||(n.Select={}),Object.defineProperty(r.prototype,"value",{get:function(){return this.currentValue||null},set:function(e){if(null===e)this.currentValueElement.removeAttribute("data-value"),this.currentValueElement.textContent=this.placeholder,this.currentValue=null;else{for(var t=0,l=this.valueElements;t<l.length;t++){var n=l[t],s=n.dataset.value;if(s===e)return this.currentValue=s,this.currentValueElement.dataset.value=s,void(this.currentValueElement.textContent=n.textContent)}console.log('No "'.concat(e,'" value for "').concat(this.id,'" select.'))}},enumerable:!1,configurable:!0}),r.prototype.callObservers=function(){for(var e=0,t=this.observers;e<t.length;e++)(0,t[e])(this.value)},r.prototype.computeMinimumWidth=function(){this.valuesListElement.style.opacity="0",this.valuesListElement.style.width="auto",this.valuesListElement.style.fontWeight="bold",this.valuesListElement.style.display="block";var e,t,l=document.createElement("div"),n=(l.classList.add("select-value"),l.textContent=this.placeholder,this.valuesListElement.appendChild(l),this.containerElement.parentNode);if(n)return t=this.containerElement.nextSibling,n.removeChild(this.containerElement),document.body.appendChild(this.containerElement),e=this.valuesListElement.getBoundingClientRect().width,document.body.removeChild(this.containerElement),n.insertBefore(this.containerElement,t),this.valuesListElement.removeChild(l),this.valuesListElement.style.display="",this.valuesListElement.style.fontWeight="",this.valuesListElement.style.width="",this.valuesListElement.style.opacity="",e+30;throw new Error("Select in not attached")},r.EXPANDED_CLASS="expanded",t=r,l=new n.Helpers.Cache("Select",function(){return n.Helpers.Utils.selectorAll(document,".select-container[id]").map(function(e){return new t(e)})}),i=new n.Helpers.Storage("select",function(e){return e.value},function(e,t){e=l.getByIdSafe(e);return!!e&&(e.value=t,e.callObservers(),!0)}),n.Helpers.Events.callAfterDOMLoaded(function(){l.load(),i.applyStoredState()}),e.addObserver=function(e,t){l.getById(e).observers.push(t)},e.getValue=function(e){return l.getById(e).value},e.setValue=function(e,t){l.getById(e).value=t},e.storeState=function(e){e=l.getById(e),i.storeState(e)},e.clearStoredState=function(e){e=l.getById(e),i.clearStoredState(e)}}(Page=Page||{});
var Page;!function(e){var t,n,r;function o(e){var r=this;this.observers=[],this.id=e.id,this.element=e,this.element.addEventListener("click",function(e){e.stopPropagation();for(var t=0,n=r.observers;t<n.length;t++)(0,n[t])()},!1)}t=e.Button||(e.Button={}),Object.defineProperty(o.prototype,"label",{set:function(e){this.element.innerText=e},enumerable:!1,configurable:!0}),n=o,r=new e.Helpers.Cache("Button",function(){return e.Helpers.Utils.selectorAll(document,"button[id]").map(function(e){return new n(e)})}),t.addObserver=function(e,t){r.getById(e).observers.push(t)},t.setLabel=function(e,t){r.getById(e).label=t}}(Page=Page||{});

var Page;!function(h){var n,o,i,T,r,t,c,a,s,u,l,v,d,f,g,p,m,y,E,w,e,L,k,M,C,H,U,b,Y,x,S,X,z,A,D;function O(e){var n=document.querySelector(e);return n||console.error("Cannot find element '"+e+"'."),n}function q(e){return h.Helpers.Utils.selector(document,"input[type=checkbox][id="+e+"]")}function B(e){document.body.style.overflow=e?"hidden":"auto"}function P(){var e=i.getBoundingClientRect();return[Math.floor(e.width),Math.floor(e.height)]}function F(e){return e+"px"}function R(){o.style.width="100vw";var e=P();if(r.checked?(o.style.height="100%",o.style.maxWidth="",o.style.maxHeight=""):(e[1]=e[0]*s/a,o.style.height=F(e[1]),o.style.maxWidth=F(a),o.style.maxHeight=F(s)),e[0]!==u[0]||e[1]!==u[1]){u=P();for(var n=0,t=l;n<t.length;n++)(0,t[n])(u[0],u[1])}}function I(e,n){var t=i.getBoundingClientRect();return[(e-t.left)/t.width,(n-t.top)/t.height]}function Q(e,n){d[0]=e,d[1]=n}function W(e,n){e=I(e,n);Q(e[0],e[1]),g=!0;for(var t=0,o=Y;t<o.length;t++)(0,o[t])()}function V(){if(g){g=!1;for(var e=0,n=x;e<n.length;e++)(0,n[e])()}}function j(e,n){var t=I(f[0]=e,f[1]=n),o=t[0]-d[0],i=t[1]-d[1];if(d[0]=t[0],d[1]=t[1],g)for(var r=0,c=S;r<c.length;r++)(0,c[r])(o,i);for(var a=0,s=X;a<s.length;a++)(0,s[a])(t[0],t[1])}function G(e,n){var t=e.clientX-n.clientX,e=e.clientY-n.clientY;return Math.sqrt(t*t+e*e)}function J(e,n){h.Helpers.URL.setQueryParameter(k,e,n?H:U)}n=h.Canvas||(h.Canvas={}),o=h.Helpers.Utils.selector(document,"#canvas-container"),i=h.Helpers.Utils.selector(document,"canvas[id=canvas]"),T=h.Helpers.Utils.selector(document,"#canvas-buttons-column"),r=q("fullscreen-checkbox-id"),t=q("side-pane-checkbox-id"),c=h.Helpers.Utils.selector(o,".loader"),s=a=512,r&&(h.Helpers.Events.callAfterDOMLoaded(function(){B(r.checked),r.addEventListener("change",function(){B(r.checked)})}),t)&&r.addEventListener("change",function(){r.checked&&(t.checked=!1)},!1),u=[0,0],l=[],h.Helpers.Events.callAfterDOMLoaded(R),r.addEventListener("change",R,!1),window.addEventListener("resize",R,!1),b=[R],Y=[],x=[],S=[],X=[],z=[],A=[],D=[],r&&r.addEventListener("change",function(){for(var e=r.checked,n=0,t=b;n<t.length;n++)(0,t[n])(e)},!1),document.addEventListener("keydown",function(e){27===e.keyCode&&n.toggleFullscreen(!1)}),L=v=v||{},d=[0,0],g=!(f=[0,0]),L.getMousePosition=function(){return[d[0],d[1]]},L.setMousePosition=Q,L.isMouseDown=function(){return g},L.mouseDown=W,L.mouseUp=V,L.mouseMove=j,i&&(i.addEventListener("mousedown",function(e){0===e.button&&W(e.clientX,e.clientY)},!1),i.addEventListener("mouseenter",function(){for(var e=0,n=z;e<n.length;e++)(0,n[e])()},!1),i.addEventListener("mouseleave",function(){for(var e=0,n=A;e<n.length;e++)(0,n[e])()},!1),i.addEventListener("wheel",function(e){if(0<D.length){for(var n=0<e.deltaY?1:-1,t=0,o=D;t<o.length;t++)(0,o[t])(n,d);return e.preventDefault(),!1}return!0},!1),window.addEventListener("mousemove",function(e){j(e.clientX,e.clientY)}),window.addEventListener("mouseup",function(e){0===e.button&&V()}),l.push(function(){j(f[0],f[1])})),p=[],m=0,i&&(i.addEventListener("touchstart",function(e){for(var n=0===p.length,t=0,o=h.Helpers.Utils.touchArray(e.changedTouches);t<o.length;t++){for(var i=o[t],r=!1,c=0,a=p;c<a.length;c++){var s=a[c];if(i.identifier===s.id){r=!0;break}}r||p.push({id:i.identifier,clientX:i.clientX,clientY:i.clientY})}n&&0<p.length?(e=p[0],v.mouseDown(e.clientX,e.clientY)):2===p.length&&(m=G(p[0],p[1]))},!1),window.addEventListener("touchend",function(e){for(var n=0<p.length,t=0,o=h.Helpers.Utils.touchArray(e.changedTouches);t<o.length;t++)for(var i=o[t],r=0;r<p.length;++r)i.identifier===p[r].id&&(p.splice(r,1),r--);1===p.length?(e=I((e=p[0]).clientX,e.clientY),v.setMousePosition(e[0],e[1])):n&&0===p.length&&v.mouseUp()}),window.addEventListener("touchmove",function(e){for(var n=0,t=h.Helpers.Utils.touchArray(e.changedTouches);n<t.length;n++)for(var o=t[n],i=0,r=p;i<r.length;i++){var c=r[i];o.identifier===c.id&&(c.clientX=o.clientX,c.clientY=o.clientY)}var a=X.length+S.length;if(v.isMouseDown()&&0<a&&e.preventDefault(),1===p.length){var s=p[0];v.mouseMove(s.clientX,s.clientY)}else if(2===p.length){var s=p[0],a=p[1],e=G(s,a),u=(m-e)/m;m=e;for(var l=I(.5*(s.clientX+a.clientX),.5*(s.clientY+a.clientY)),d=0,f=D;d<f.length;d++)(0,f[d])(5*u,l)}},{passive:!1})),L=y=y||{},E={},w="-indicator-id",L.getIndicator=function(e){var n=O("#"+e+w);if(n)return n;throw new Error("Could not find indicator '".concat(e,"'."))},L.getIndicatorSpan=function(e){if(!E[e]){var n=O("#"+(e+w)+" span");if(!n)throw new Error("Could not find indicator span '".concat(e,"'."));E[e]=n}return E[e]},L=e=e||{},k="canvas",M="fullscreen",C="sidepane",H="true",U="false",L.attachStorageEvents=function(){r&&r.addEventListener("change",function(){J(M,r.checked),h.Helpers.URL.removeQueryParameter(k,C)}),t&&t.addEventListener("change",function(){J(C,t.checked)})},L.applyStoredState=function(){h.Helpers.URL.loopOnParameters(k,function(e,n){e!==M||n!==H&&n!==U?e!==C||n!==H&&n!==U?(console.log("Removing invalid query parameter '"+e+"="+n+"'."),h.Helpers.URL.removeQueryParameter(k,e)):t&&(t.checked=n===H):r&&(r.checked=n===H)})},e.applyStoredState(),e.attachStorageEvents(),n.Observers=Object.freeze({canvasResize:l,fullscreenToggle:b,mouseDown:Y,mouseDrag:S,mouseEnter:z,mouseLeave:A,mouseMove:X,mouseWheel:D,mouseUp:x}),n.getAspectRatio=function(){var e=P();return e[0]/e[1]},n.getCanvas=function(){return i},n.getCanvasContainer=function(){return o},n.getSize=P,n.getMousePosition=function(){return v.getMousePosition()},n.isFullScreen=function(){return r&&r.checked},n.isMouseDown=function(){return v.isMouseDown()},n.setIndicatorText=function(e,n){(e=y.getIndicatorSpan(e))&&(e.innerText=n)},n.setIndicatorVisibility=function(e,n){(e=y.getIndicator(e))&&(e.style.display=n?"":"none")},n.setIndicatorsVisibility=function(e){document.getElementById("indicators").style.display=e?"":"none"},n.setMaxSize=function(e,n){a=e,s=n,R()},n.setResizable=function(e){T.style.display=e?"":"none"},n.setLoaderText=function(e){c&&(c.querySelector("span").innerText=e)},n.showLoader=function(e){c&&(c.style.display=e?"block":"")},n.toggleFullscreen=function(e){r&&e!==r.checked&&(r.checked=e,"function"==typeof window.CustomEvent?r.dispatchEvent(new CustomEvent("change")):"function"==typeof CustomEvent.prototype.initCustomEvent&&((e=document.createEvent("CustomEvent")).initCustomEvent("change",!1,!1,void 0),r.dispatchEvent(e)))}}(Page=Page||{});
Page.Canvas.setMaxSize(512,512);